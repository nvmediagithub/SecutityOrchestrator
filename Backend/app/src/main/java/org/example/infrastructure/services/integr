package org.example.infrastructure.services.integrated.dto;

import org.example.infrastructure.services.llm.OpenApiAnalysisService;
import org.example.infrastructure.services.bpmn.BpmnAnalysisService;

import java.time.LocalDateTime;
import java.util.List;
import java.util.Map;

/**
 * DTO для частичных результатов анализа
 */
public class PartialAnalysisResult {
    
    private String analysisType; // "OPENAPI", "BPMN", "INTEGRATED"
    
    // Результаты OpenAPI анализа
    private OpenApiAnalysisService.AnalysisResult openApiResult;
    
    // Результаты BPMN анализа
    private List<BpmnAnalysisService.BpmnAnalysisResult> bpmnResults;
    
    // Результаты интегрированного анализа
    private List<ApiBpmnContradiction> contradictions;
    private List<PrioritizedIssue> prioritizedIssues;
    private List<IntegratedRecommendation> recommendations;
    
    // Метаданные
    private long processingTimeMs;
    private LocalDateTime timestamp;
    private Map<String, Object> additionalData;
    
    // Конструкторы
    public PartialAnalysisResult() {}
    
    // Геттеры и сеттеры
    public String getAnalysisType() { return analysisType; }
    public void setAnalysisType(String analysisType) { this.analysisType = analysisType; }
    
    public OpenApiAnalysisService.AnalysisResult getOpenApiResult() { return openApiResult; }
    public void setOpenApiResult(OpenApiAnalysisService.AnalysisResult openApiResult) { this.openApiResult = openApiResult; }
    
    public List<BpmnAnalysisService.BpmnAnalysisResult> getBpmnResults() { return bpmnResults; }
    public void setBpmnResults(List<BpmnAnalysisService.BpmnAnalysisResult> bpmnResults) { this.bpmnResults = bpmnResults; }
    
    public List<ApiBpmnContradiction> getContradictions() { return contradictions; }
    public void setContradictions(List<ApiBpmnContradiction> contradictions) { this.contradictions = contradictions; }
    
    public List<PrioritizedIssue> getPrioritizedIssues() { return prioritizedIssues; }
    public void setPrioritizedIssues(List<PrioritizedIssue> prioritizedIssues) { this.prioritizedIssues = prioritizedIssues; }
    
    public List<IntegratedRecommendation> getRecommendations() { return recommendations; }
    public void setRecommendations(List<IntegratedRecommendation> recommendations) { this.recommendations = recommendations; }
    
    public long getProcessingTimeMs() { return processingTimeMs; }
    public void setProcessingTimeMs(long processingTimeMs) { this.processingTimeMs = processingTimeMs; }
    
    public LocalDateTime getTimestamp() { return timestamp; }
    public void setTimestamp(LocalDateTime timestamp) { this.timestamp = timestamp; }
    
    public Map<String, Object> getAdditionalData() { return additionalData; }
    public void setAdditionalData(Map<String, Object> additionalData) { this.additionalData = additionalData; }
    
    // Вспомогательные методы
    public boolean isOpenApiAnalysis() {
        return "OPENAPI".equals(analysisType);
    }
    
    public boolean isBpmnAnalysis() {
        return "BPMN".equals(analysisType);
    }
    
    public boolean isIntegratedAnalysis() {
        return "INTEGRATED".equals(analysisType);
    }
    
    @Override
    public String toString() {
        return "PartialAnalysisResult{" +
                "analysisType='" + analysisType + '\'' +
                ", processingTimeMs=" + processingTimeMs +
                '}';
    }
}