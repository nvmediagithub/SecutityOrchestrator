package org.example.infrastructure.repositories;

import org.example.domain.entities.TestDataSet;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;
import java.util.List;
import java.util.Optional;

@Repository
public interface TestDataSetRepository extends JpaRepository<TestDataSet, Long> {
    
    Optional<TestDataSet> findByDataSetId(String dataSetId);
    
    List<TestDataSet> findByDataType(String dataType);
    
    List<TestDataSet> findByCategory(String category);
    
    List<TestDataSet> findByStatus(TestDataSet.DataStatus status);
    
    @Query("SELECT tds FROM TestDataSet tds WHERE tds.status = 'ACTIVE'")
    List<TestDataSet> findActiveDataSets();
    
    @Query("SELECT tds FROM TestDataSet tds WHERE tds.isReusable = true")
    List<TestDataSet> findReusableDataSets();
    
    @Query("SELECT tds FROM TestDataSet tds WHERE tds.name LIKE %:name% OR tds.description LIKE %:name%")
    List<TestDataSet> searchByNameOrDescription(@Param("name") String name);
    
    boolean existsByDataSetId(String dataSetId);
    
    void deleteByDataSetId(String dataSetId);
}