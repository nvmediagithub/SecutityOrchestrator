{"openapi":"3.1.0","info":{"title":"Mock Virtual Bank API","description":"Сложная мок-версия OpenAPI с SQLite, транзакциями, предупреждениями и намеренными 'soft' ошибками.","version":"0.2.0"},"paths":{"/auth/bank-token":{"post":{"summary":"Create Bank Token","operationId":"create_bank_token_auth_bank_token_post","parameters":[{"name":"client_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"client_id команды","title":"Client Id"},"description":"client_id команды"},{"name":"client_secret","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"client_secret команды","title":"Client Secret"},"description":"client_secret команды"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/teams":{"post":{"summary":"Register Team","operationId":"register_team_teams_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamRegistrationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamRegistrationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/teams/{team_id}/secret":{"get":{"summary":"Get Team Secret","operationId":"get_team_secret_teams__team_id__secret_get","parameters":[{"name":"team_id","in":"path","required":true,"schema":{"type":"string","title":"Team Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/accounts":{"get":{"summary":"List Accounts","operationId":"list_accounts_accounts_get","parameters":[{"name":"client_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"client_id клиента для межбанковых запросов","title":"Client Id"},"description":"client_id клиента для межбанковых запросов"},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Account"},"title":"Response List Accounts Accounts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/accounts/{account_id}":{"get":{"summary":"Get Account","operationId":"get_account_accounts__account_id__get","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string","title":"Account Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/accounts/{account_id}/balances":{"get":{"summary":"Get Balance","operationId":"get_balance_accounts__account_id__balances_get","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string","title":"Account Id"}},{"name":"requesting-bank","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Requesting-Bank"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/account-consents/request":{"post":{"summary":"Request Consent","operationId":"request_consent_account_consents_request_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/accounts/{account_id}/transactions":{"get":{"summary":"Account Transactions","operationId":"account_transactions_accounts__account_id__transactions_get","parameters":[{"name":"account_id","in":"path","required":true,"schema":{"type":"string","title":"Account Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":10,"title":"Limit"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/payments":{"post":{"summary":"Create Payment","operationId":"create_payment_payments_post","parameters":[{"name":"requesting-bank","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Requesting-Bank"}},{"name":"X-Simulate-Insufficient","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Simulate-Insufficient"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Account":{"properties":{"account_id":{"type":"string","title":"Account Id"},"currency":{"type":"string","title":"Currency"},"account_type":{"type":"string","title":"Account Type"},"nickname":{"type":"string","title":"Nickname"},"servicer":{"type":"string","title":"Servicer"},"owner_client":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owner Client"},"balance":{"type":"number","title":"Balance","default":0.0}},"type":"object","required":["account_id","currency","account_type","nickname","servicer","owner_client"],"title":"Account"},"ConsentRequest":{"properties":{"client_id":{"type":"string","title":"Client Id","description":"ID клиента, по которому создаётся согласие"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions","description":"Список разрешений на данные"},"requesting_bank":{"type":"string","title":"Requesting Bank","description":"ID запрашивающего банка"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason","description":"Цель запроса согласия"}},"type":"object","required":["client_id","permissions","requesting_bank"],"title":"ConsentRequest"},"ConsentResponse":{"properties":{"consent_id":{"type":"string","title":"Consent Id"},"status":{"type":"string","title":"Status","default":"approved"},"auto_approved":{"type":"boolean","title":"Auto Approved","default":true},"warning":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Warning"}},"type":"object","required":["consent_id","warning"],"title":"ConsentResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PaymentRequest":{"properties":{"from_account":{"type":"string","title":"From Account"},"to_account":{"type":"string","title":"To Account"},"amount":{"type":"number","title":"Amount"},"currency":{"type":"string","title":"Currency","default":"RUB"}},"type":"object","required":["from_account","to_account","amount"],"title":"PaymentRequest"},"TeamRegistrationRequest":{"properties":{"name":{"type":"string","title":"Name","description":"Название команды/проекта"}},"type":"object","required":["name"],"title":"TeamRegistrationRequest"},"TeamRegistrationResponse":{"properties":{"team_id":{"type":"string","title":"Team Id"},"secret":{"type":"string","title":"Secret"},"registered_at":{"type":"string","title":"Registered At"}},"type":"object","required":["team_id","secret","registered_at"],"title":"TeamRegistrationResponse"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"client_id":{"type":"string","title":"Client Id"},"expires_in":{"type":"integer","title":"Expires In","default":86400}},"type":"object","required":["access_token","client_id"],"title":"TokenResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}