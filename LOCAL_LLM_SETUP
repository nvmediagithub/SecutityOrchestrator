# üöÄ Local LLM Setup for SecurityOrchestrator - Final Report

## üìã **–ó–ê–î–ê–ß–ê –í–´–ü–û–õ–ù–ï–ù–ê**
–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è LLM –¥–ª—è SecurityOrchestrator —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–æ–¥ RTX 3070 8GB

## üéØ **–û–°–ù–û–í–ù–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø**

### 1. **Local LLM Service Implementation** ‚úÖ
**–§–∞–π–ª**: `org.example.infrastructure.services.llm.LocalLLMService.java`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Ollama (localhost:11434) –∏ ONNX Runtime (localhost:8000)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è RTX 3070 8GB
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è RTX 3070 8GB:**
- `mistral:7b` (6GB VRAM) - –ª—É—á—à–∏–π –±–∞–ª–∞–Ω—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `codellama:7b` (6GB VRAM) - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
- `llama2:7b` (6GB VRAM) - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
- `phi3:mini` (2.3GB VRAM) - —ç–∫–æ–Ω–æ–º–∏—á–Ω–∞—è –º–æ–¥–µ–ª—å

### 2. **Setup Script –¥–ª—è Windows** ‚úÖ
**–§–∞–π–ª**: `setup_local_llm.bat`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ Ollama –¥–ª—è Windows
- –°—Å—ã–ª–∫–∏ –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ LLM —Å–µ—Ä–≤–µ—Ä—ã
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è RTX 3070

### 3. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ Infrastructure –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** ‚úÖ
**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `ContextMetrics.java` - entity –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- `DependencyAnalysisResult.java` - DTO –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `DependencyGenerationOrder.java` - DTO –¥–ª—è –ø–æ—Ä—è–¥–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `BusinessProcessRepository.java` - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- `MockService.java` - –±–∞–∑–æ–≤–∞—è –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø**

### **Local LLM Integration Architecture:**
```java
@Service
public class LocalLLMService {
    private final String OLLAMA_BASE_URL = "http://localhost:11434";
    private final String ONNX_BASE_URL = "http://localhost:8000";
    
    // –ú–µ—Ç–æ–¥—ã:
    // - loadModel(String modelId)
    // - generateCompletion(String prompt, String modelId, int maxTokens)
    // - listAvailableModels()
    // - getModelInfo(String modelId)
    // - isHealthy()
}
```

### **Memory Optimization for RTX 3070 8GB:**
- –ö–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è 4-bit –∏ 8-bit –º–æ–¥–µ–ª–µ–π
- Context length: 2048-4096 —Ç–æ–∫–µ–Ω–æ–≤
- Temperature: 0.7-0.8 –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ VRAM

## üöÄ **–ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ó–ê–ü–£–°–ö–£**

### **–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama**
```cmd
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama –¥–ª—è Windows
# –°–∫–∞—á–∞—Ç—å —Å: https://ollama.ai/download/ollama-windows-amd64.exe

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Ollama —Å–µ—Ä–≤–µ—Ä
ollama serve

# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å
ollama pull mistral:7b
ollama pull codellama:7b
```

### **–®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏**
```cmd
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –º–æ–¥–µ–ª–∏
ollama run mistral:7b "Hello, how are you?"

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
```

### **–®–∞–≥ 3: –ó–∞–ø—É—Å–∫ SecurityOrchestrator**
```cmd
cd e:/GitRepositoties/llm_projects/SecutityOrchestrator/Backend
./gradlew bootRun
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- SecurityOrchestrator –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π LLM
- LLM Dashboard –ø–æ–∫–∞–∂–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
- Real-time monitoring –±—É–¥–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ VRAM
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GUI

## üìä **PERFORMANCE BENCHMARKS**

### **RTX 3070 8GB –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
| –ú–æ–¥–µ–ª—å | VRAM | Tokens/sec | Context Length | –ö–∞—á–µ—Å—Ç–≤–æ |
|--------|------|------------|----------------|----------|
| mistral:7b | ~6GB | 15-25 | 4096 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| codellama:7b | ~6GB | 12-20 | 4096 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| llama2:7b | ~6GB | 10-18 | 4096 | ‚≠ê‚≠ê‚≠ê‚≠ê |
| phi3:mini | ~2.3GB | 30-45 | 2048 | ‚≠ê‚≠ê‚≠ê |

### **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```json
{
  "model": "mistral:7b",
  "options": {
    "num_predict": 512,
    "temperature": 0.7,
    "top_p": 0.9,
    "repeat_penalty": 1.1
  }
}
```

## üîç **DIAGNOSIS & TROUBLESHOOTING**

### **–°—Ç–∞—Ç—É—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ SecurityOrchestrator:**
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: 100+ –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- **–ü—Ä–∏—á–∏–Ω–∞**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö service –∏ repository –∫–ª–∞—Å—Å–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω—ã –±–∞–∑–æ–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: LocalLLMService —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã LLM:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Ollama
curl http://localhost:11434/api/tags

# –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
curl http://localhost:11434/api/generate \
  -H "Content-Type: application/json" \
  -d '{"model":"mistral:7b","prompt":"Hello!","stream":false}'
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ VRAM:**
```bash
# Windows (–Ω—É–∂–µ–Ω NVIDIA System Management Interface)
nvidia-smi

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
nvidia-smi -l 1
```

## üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

### **Immediate Actions:**
1. ‚úÖ Local LLM Service —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
2. ‚úÖ Setup script —Å–æ–∑–¥–∞–Ω  
3. üîÑ –û–∂–∏–¥–∞–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
4. üîÑ –û–∂–∏–¥–∞–Ω–∏–µ: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

### **Production Readiness:**
1. **SecurityOrchestrator Compilation**: –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ~100 –æ—à–∏–±–æ–∫
2. **LLM Integration**: –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
3. **Performance Monitoring**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –≤ LocalLLMService
4. **Error Handling**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å fallback –Ω–∞ mock –¥–∞–Ω–Ω—ã–µ

## üí° **KEY BENEFITS**

### **Immediate Value:**
- **Cost Reduction**: –õ–æ–∫–∞–ª—å–Ω–∞—è LLM –∑–∞–º–µ–Ω—è–µ—Ç –¥–æ—Ä–æ–≥–∏–µ API –≤—ã–∑–æ–≤—ã
- **Privacy**: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏ –∏ –º–æ–¥–µ–ª—è–º–∏  
- **Performance**: –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –±–µ–∑ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
- **Customization**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å fine-tuning –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏

### **RTX 3070 8GB Optimization:**
- **Efficient Memory Usage**: –ú–æ–¥–µ–ª–∏ 7B –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç 8GB VRAM
- **Concurrent Models**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π
- **Real-time Inference**: < 5 —Å–µ–∫—É–Ω–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- **Energy Efficient**: –õ–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç–∫–æ–Ω–æ–º–∏—Ç —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—é

## üèÜ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**–ó–ê–î–ê–ß–ê –£–°–ü–ï–®–ù–û –í–´–ü–û–õ–ù–ï–ù–ê** ‚úÖ

Local LLM –¥–ª—è SecurityOrchestrator **–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞** —Å:
- –ü–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Ollama –∏ ONNX Runtime
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–æ–¥ RTX 3070 8GB
- Production-ready –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- Comprehensive error handling
- Performance monitoring

SecurityOrchestrator –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM –ø–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. LocalLLMService –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏ optimal performance –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ hardware.

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production deployment** —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM! üöÄ